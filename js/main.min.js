jQuery(function(a){a("body").on("click",".dropdown-cart-button .dropdown-total",function(d){var c=a(this).parent();var b=a(".dropdown",c);if(!b.is(":visible")){b.removeClass("drop-left").removeClass("drop-bottom");b.show();var e=b.width();var h=b.height();var i=c.get(0).getBoundingClientRect();b.hide();var f=i.right-e;var k=a(window).width()-(i.left+e);var g=i.bottom-h;var j=a(window).height()-(i.bottom+h);if(f<10&&k>0){b.addClass("drop-left")}if(j<10&&g>0){b.addClass("drop-bottom")}b.slideDown()}else{b.slideUp()}return false});a("body").on("click",".dropdown-cart-button",function(b){b.stopPropagation()});a(document).on("click",function(){a(".dropdown-cart-button .dropdown").hide()});a("body").bind("adding_to_cart",function(){a(".widget_shopping_mini_cart").show()});a("body").bind("added_to_cart",function(){a(".widget_shopping_mini_cart").addClass("loading");var b=window.location.toString();b=b.replace("add-to-cart","added-to-cart");if(b.indexOf("?")>=0){b+="&t="+new Date().getTime()}else{b+="?t="+new Date().getTime()}a(".widget_shopping_mini_cart").each(function(d,c){a(".widget_shopping_mini_cart_content",c).load(b+" #"+c.id+"-content",function(){a(c).removeClass("loading")})})})});